################################################################################
# ğŸ”‘ KONFIGURACJA SSH DLA OVH - KROK PO KROKU
# Email: gajewa2014@gmail.com
# Serwer: ubuntu@51.83.131.142
################################################################################

=== KROK 1: WYGENERUJ KLUCZ SSH (Windows PowerShell) ===

# UtwÃ³rz folder .ssh jeÅ›li nie istnieje
mkdir C:\Users\48501\.ssh -ErrorAction SilentlyContinue

# Generuj klucz SSH
ssh-keygen -t ed25519 -C "gajewa2014@gmail.com" -f C:\Users\48501\.ssh\id_ed25519_ovh

# NaciÅ›nij Enter 3x (bez hasÅ‚a dla wygody, lub ustaw hasÅ‚o jeÅ›li wolisz)


=== KROK 2: WYÅšWIETL KLUCZ PUBLICZNY ===

# PokaÅ¼ klucz publiczny (do wklejenia na serwer)
Get-Content C:\Users\48501\.ssh\id_ed25519_ovh.pub

# SKOPIUJ CAÅY WYÅšWIETLONY TEKST (zaczyna siÄ™ od "ssh-ed25519...")


=== KROK 3A: DODAJ KLUCZ PRZEZ PANEL OVH (REINSTALACJA) ===

1. IdÅº na: https://www.ovh.com/manager/
2. Zaloguj siÄ™: gajewa2014@gmail.com
3. Wybierz VPS: vps-a3f42e4f (51.83.131.142)
4. Kliknij: "Reinstall"
5. Wybierz OS: Ubuntu 24.04 LTS (Noble Numbat)
6. W sekcji SSH Keys â†’ "Add SSH Key"
7. Nazwa: "mordzix-key"
8. Wklej klucz publiczny (z kroku 2)
9. PotwierdÅº reinstalacjÄ™
10. Czekaj 5-10 minut


=== KROK 3B: DODAJ KLUCZ BEZ REINSTALACJI (jeÅ›li masz dostÄ™p) ===

# JeÅ›li masz jeszcze dostÄ™p SSH z hasÅ‚em:
ssh ubuntu@51.83.131.142

# Na serwerze wykonaj:
mkdir -p ~/.ssh
chmod 700 ~/.ssh

# Wklej klucz publiczny (ZASTÄ„P tym co skopiowaÅ‚eÅ› w kroku 2):
echo "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAA... gajewa2014@gmail.com" >> ~/.ssh/authorized_keys

chmod 600 ~/.ssh/authorized_keys

# Restart SSH (opcjonalnie):
sudo systemctl restart ssh

exit


=== KROK 4: TESTUJ POÅÄ„CZENIE ===

# Z Windows PowerShell - poÅ‚Ä…cz siÄ™ kluczem:
ssh -i C:\Users\48501\.ssh\id_ed25519_ovh ubuntu@51.83.131.142

# JeÅ›li dziaÅ‚a, zobaczysz:
# ubuntu@vps-a3f42e4f:~$


=== KROK 5: KONFIGURACJA SSH CONFIG (opcjonalnie - dla wygody) ===

# UtwÃ³rz plik config:
@"
Host ovh-mordzix
    HostName 51.83.131.142
    User ubuntu
    IdentityFile C:\Users\48501\.ssh\id_ed25519_ovh
    ServerAliveInterval 60
"@ | Out-File -FilePath C:\Users\48501\.ssh\config -Encoding UTF8

# Teraz moÅ¼esz Å‚Ä…czyÄ‡ siÄ™ prostÄ… komendÄ…:
ssh ovh-mordzix


=== KROK 6: PRZEÅšLIJ PROJEKT NA SERWER ===

# UtwÃ³rz workspace na serwerze:
ssh ovh-mordzix
sudo mkdir -p /workspace/mrd
sudo chown -R ubuntu:ubuntu /workspace
exit

# PrzeÅ›lij pliki (z Windows):
scp -i C:\Users\48501\.ssh\id_ed25519_ovh -r C:\Users\48501\Desktop\mrd\* ubuntu@51.83.131.142:/workspace/mrd/

# LUB z config (krÃ³cej):
scp -r C:\Users\48501\Desktop\mrd\* ovh-mordzix:/workspace/mrd/


=== KROK 7: URUCHOM APLIKACJÄ˜ ===

ssh ovh-mordzix
cd /workspace/mrd
chmod +x start_production.sh
sudo ./start_production.sh


=== TROUBLESHOOTING ===

Problem: "Permission denied (publickey)"
RozwiÄ…zanie:
1. SprawdÅº uprawnienia klucza: icacls C:\Users\48501\.ssh\id_ed25519_ovh
2. UÅ¼yj peÅ‚nej Å›cieÅ¼ki: ssh -i C:\Users\48501\.ssh\id_ed25519_ovh ubuntu@51.83.131.142
3. Debug SSH: ssh -vvv -i C:\Users\48501\.ssh\id_ed25519_ovh ubuntu@51.83.131.142

Problem: Klucz nie dziaÅ‚a
RozwiÄ…zanie:
1. Reinstall VPS przez panel OVH z kluczem SSH
2. Lub uÅ¼yj metody 3B (dodaj klucz manualnie)

Problem: Brak dostÄ™pu do serwera
RozwiÄ…zanie:
1. Panel OVH â†’ VPS â†’ KVM/IPMI (konsola)
2. Zaloguj siÄ™ jako ubuntu/root
3. Dodaj klucz manualnie (krok 3B)


=== SZYBKIE KOMENDY ===

# Generuj klucz:
ssh-keygen -t ed25519 -C "gajewa2014@gmail.com" -f C:\Users\48501\.ssh\id_ed25519_ovh

# PokaÅ¼ klucz publiczny:
Get-Content C:\Users\48501\.ssh\id_ed25519_ovh.pub

# PoÅ‚Ä…cz siÄ™:
ssh -i C:\Users\48501\.ssh\id_ed25519_ovh ubuntu@51.83.131.142

# PrzeÅ›lij pliki:
scp -i C:\Users\48501\.ssh\id_ed25519_ovh -r C:\Users\48501\Desktop\mrd\* ubuntu@51.83.131.142:/workspace/mrd/


################################################################################
# âœ… GOTOWE!
################################################################################

Po skonfigurowaniu SSH bÄ™dziesz mÃ³gÅ‚ Å‚Ä…czyÄ‡ siÄ™ bez hasÅ‚a:
ssh ovh-mordzix

NastÄ™pnie uruchom skrypt produkcyjny:
cd /workspace/mrd && sudo ./start_production.sh

Aplikacja bÄ™dzie dostÄ™pna na:
https://mordxixai.xyz/
